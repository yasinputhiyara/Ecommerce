<%- include("../partials/header") %>

<link rel="stylesheet" href="/user/essence/css/core-style.css">

  <style>
    html * {
      -webkit-font-smoothing: antialiased;
    }

    h3 {
      font-weight: 500 !important;
      font-size: 25px !important;
    }

    h4 {
      font-size: 18px !important;
      font-weight: 300 !important;
    }


    .card.card-carousel {
      border: 0;
      margin-bottom: 30px;
      margin-top: 30px;
      border-radius: 6px;
      color: rgba(0, 0, 0, .87);
      background: #fff;
      width: 100%;
      box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
    }

    .card.card-carousel img {
      border-radius: 6px;
    }



    .carousel-indicators {
      position: absolute;
      right: 0;
      bottom: 10px;
      left: 0;
      z-index: 15;
      display: flex;
      justify-content: center;
      padding-left: 0;
      margin-right: 15%;
      margin-left: 15%;
      list-style: none;
    }

    .carousel .carousel-indicators {
      bottom: 5px;
    }

    .carousel .carousel-indicators li {
      display: inline-block;
      width: 10px;
      height: 10px;
      text-indent: -999px;
      cursor: pointer;
      border: 1px solid #fff;
      border-radius: 10px;
      background: #fff;
      box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .12), 0 1px 5px 0 rgba(0, 0, 0, .2);
      border-radius: 2px;
    }

    .carousel .carousel-indicators .active {
      margin: 11px 10px;
    }

    .carousel .carousel-indicators li {
      margin: 11px 10px;
    }

    .carousel .carousel-indicators .active {
      margin-top: 10px;
      transform: scale(1.5);
      box-shadow: 0 4px 5px 0 rgba(0, 0, 0, .14), 0 1px 10px 0 rgba(0, 0, 0, .12), 0 2px 4px -1px rgba(0, 0, 0, .2);
    }

    .carousel-inner {
      position: relative;
      width: 100%;
      overflow: hidden;
    }

    .carousel-item {
      position: relative;
      display: none;
      align-items: center;
      width: 100% !important;
      transition: transform .6s ease;
      backface-visibility: hidden;
      perspective: 1000px;
    }

    .carousel-item.active {
      display: block;
    }

    .carousel .carousel-caption {
      padding-bottom: 45px;
    }

    .carousel .carousel-caption .material-icons {
      position: relative;
      top: 5px;
    }

    .carousel .carousel-control-next .material-icons {
      z-index: 5;
      display: inline-block;
      font-size: 50px;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50px;
      margin: auto;
    }

    .carousel .carousel-control-prev .material-icons {
      z-index: 5;
      display: inline-block;
      font-size: 50px;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50px;
      margin: auto;
    }

    .footer p {
      margin-bottom: 0;
    }

    footer p a {
      color: #555;
      font-weight: 400;
    }

    footer p a:hover {
      color: #9f26aa;
      text-decoration: none;
    }

    .product-img-container {
      position: relative;
      overflow: hidden;
    }

    .product-img-container img {
      transition: transform 0.3s ease;
    }

    .product-img-container .hover-img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .product-img-container:hover img {
      transform: scale(1.1);
    }

    .product-img-container:hover .hover-img {
      opacity: 1;
    }

    .card.product-card {
      border: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .card.product-card .essence-btn {
      background-color: #ff6f61;
      color: #fff;
      font-weight: bold;
    }

    .card.product-card .essence-btn:hover {
      background-color: #e65550;
      color: #fff;
    }
  </style>

  
<style>
  /* Add this CSS to your existing styles */
  .single-product-wrapper {
    position: relative;
    margin-bottom: 50px;
    transition: all 0.3s;
    background: #fff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
  }
  
  .single-product-wrapper:hover {
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
    transform: translateY(-3px);
  }
  
  .product-img {
    position: relative;
    overflow: hidden;
    padding-top: 20%; /* Maintain aspect ratio */
  }
  
  .image-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  
  .product-img img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: all 0.5s;
  }
  
  .hover-img {
    opacity: 0;
    transform: scale(1.1);
  }
  
  .single-product-wrapper:hover .product-img img:first-child {
    opacity: 0;
  }
  
  .single-product-wrapper:hover .hover-img {
    opacity: 1;
    transform: scale(1);
  }
  
  .product-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    z-index: 2;
  }
  
  .badge-new {
    background: #ff084e;
    color: #fff;
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: 700;
  }
  
  .product-actions {
    position: absolute;
    right: 15px;
    top: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    opacity: 0;
    transform: translateX(20px);
    transition: all 0.3s;
  }
  
  .single-product-wrapper:hover .product-actions {
    opacity: 1;
    transform: translateX(0);
  }
  
  .product-actions a {
    width: 35px;
    height: 35px;
    background: #fff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #333;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    transition: all 0.3s;
  }
  
  .product-actions a:hover {
    background: #ff084e;
    color: #fff;
  }
  
  .product-description {
    padding: 20px;
    text-align: center;
  }
  
  .product-title h6 {
    font-size: 16px;
    margin: 0;
    font-weight: 600;
    color: #333;
    transition: color 0.3s;
  }
  
  .product-title:hover h6 {
    color: #ff084e;
  }
  
  .product-price {
    margin: 10px 0;
  }
  
  .old-price {
    color: #999;
    text-decoration: line-through;
    margin-right: 10px;
    font-size: 14px;
  }
  
  .current-price {
    color: #ff084e;
    font-size: 18px;
    font-weight: 600;
  }
  
  .hover-content {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s;
  }
  
  .single-product-wrapper:hover .hover-content {
    opacity: 1;
    transform: translateY(0);
  }
  
  .add-to-cart-btn {
    margin-top: 15px;
  }
  
  .essence-btn {
    display: inline-block;
    min-width: 170px;
    height: 50px;
    color: #ffffff;
    border: none;
    border-radius: 25px;
    padding: 0 40px;
    text-transform: uppercase;
    font-size: 12px;
    line-height: 50px;
    background-color: #ff084e;
    letter-spacing: 1.5px;
    font-weight: 600;
    transition: all 0.3s;
  }
  
  .essence-btn:hover {
    background-color: #333;
    color: #fff;
  }
  
  /* Responsive adjustments */
  @media only screen and (max-width: 767px) {
    .single-product-wrapper {
      margin-bottom: 30px;
    }
    
    .product-description {
      padding: 15px;
    }
    
    .essence-btn {
      min-width: 140px;
      height: 40px;
      line-height: 40px;
      padding: 0 20px;
    }
  }

  .wishlist-container {
      position: absolute;
      top: 15px;
      right: 15px;
      z-index: 3;
    }

    .wishlist-btn {
      width: 40px;
      height: 40px;
      background: white;
      border: none;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .wishlist-btn i {
      color: #999;
      transition: color 0.3s ease;
    }

    .wishlist-btn:hover {
      background: #ff084e;
    }

    .wishlist-btn:hover i {
      color: white;
    }

    .wishlist-btn.active i {
      color: #ff084e;
    }

  </style>
  


  <!-- ##### Welcome Area Start ##### -->
  <section class="welcome_area bg-img background-overlay" style="height: 300px;">
    <!-- $$$$$$$ Carsole Start $$$$$$$$$$-->

    <div class="container-fluid">


      <div class="section" id="carousel">

        <div class="row">
          <div class="w-100 ">
            <!-- Carousel Card -->
            <div class="card card-raised card-carousel">
              <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="3000">
                <ol class="carousel-indicators">
                  <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                  <li data-target="#carouselExampleIndicators" data-slide-to="1" class=""></li>
                  <li data-target="#carouselExampleIndicators" data-slide-to="2" class=""></li>
                </ol>
                <div class="carousel-inner">


                  <div class="carousel-item">
                    <img class="d-block w-100" src="/user/img/banner1.png" alt="First slide" style="height: 400px;" />
                    <div class="carousel-caption d-none d-md-block">
                      <!-- <h4>
                            <i class="material-icons">location_on</i>
                            Yellowstone National Park, United States
                          </h4> -->
                    </div>
                  </div>

                  <div class="carousel-item active">
                    <img class="d-block w-100" src="/user/img/banner2.png" alt="Second slide" style="height: 400px;" />
                    <div class="carousel-caption d-none d-md-block">
                      <!-- <h4>
                            <i class="material-icons">location_on</i>
                            Somewhere Beyond, United States
                          </h4> -->
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img class="d-block w-100" src="/user/img/banner3.png" alt="Third slide" style="height: 400px;" />
                    <div class="carousel-caption d-none d-md-block">
                      <!-- <h4>
                            <i class="material-icons">location_on</i>
                            Yellowstone National Park, United States
                          </h4> -->
                    </div>
                  </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                  <i class="material-icons">keyboard_arrow_left</i>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                  <i class="material-icons">keyboard_arrow_right</i>
                  <span class="sr-only">Next</span>
                </a>
              </div>
            </div>
            <!-- End Carousel Card -->
          </div>
        </div>

      </div>
    </div>
    <!-- $$$$$$$ Carsole End $$$$$$$$$$-->
  </section>

  <!-- ##### Welcome Area End ##### -->



  <!-- ##### Top Catagory Area Start ##### -->
  <section style="margin-top: 100px">

    <div class="top_catagory_area section-padding-80 clearfix">
      <div class="container">
        <div class="row justify-content-center">
          <!-- Single Catagory -->
          <div class="col-12 col-sm-6 col-md-4">
            <div class="single_catagory_area d-flex align-items-center justify-content-center bg-img"
              style="background-image: url(/banner/Mens.png)">
              <div class="catagory-content">
                <a href="#">Mens</a>
              </div>
            </div>
          </div>
          <!-- Single Catagory -->
          <div class="col-12 col-sm-6 col-md-4">
            <div class="single_catagory_area d-flex align-items-center justify-content-center bg-img"
              style="background-image: url(/banner/womens.png)">
              <div class="catagory-content">
                <a href="#">Womens</a>
              </div>
            </div>
          </div>
          <!-- Single Catagory -->
          <div class="col-12 col-sm-6 col-md-4">
            <div class="single_catagory_area d-flex align-items-center justify-content-center bg-img"
              style="background-image: url(/banner/kids.png)">
              <div class="catagory-content">
                <a href="">Kids</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- ##### Top Catagory Area End ##### -->


  <!-- $$$$$$$$$$$$ -->
  <section>
    <div class="container mt-3">
      <div class="section-heading text-center">
        <h2>Popular Brands</h2>
      </div>
      <div class="row">

        <div class="col-md-12 mb-3" style="height: 150px; margin-bottom: 20px;">
          <a href="/shop?minPrice=100&maxPrice=4000&brand=Puma">
            <img src="/banner/homebanner1.png" class="img-fluid" style="height: 100%; width: 100%; object-fit: cover;"
            alt="Responsive image">

          </a>
          
        </div>

        <div class="col-md-12 mb-3" style="height: 150px; margin-bottom: 20px;">
          <a href="/shop?minPrice=100&maxPrice=4000&brand=Nike">
            <img src="/banner/homebanner2.png" class="img-fluid" style="height: 100%; width: 100%; object-fit: cover;"
            alt="Responsive image">
          </a>
          
        </div>

        <div class="col-md-12 mb-3" style="height: 150px; margin-bottom: 20px;">
          <a href="/shop?minPrice=100&maxPrice=4000&brand=New Balance">
            <img src="/banner/homebanner3.png" class="img-fluid" style="height: 100%; width: 100%; object-fit: cover;"
            alt="Responsive image">
          </a>
          
        </div>

      </div>
    </div>
  </section>
  <!-- $$$$$$$$$$$$ -->

  <!-- ##### CTA Area Start ##### -->
  <!-- <div class="cta-area">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="cta-content bg-img background-overlay" style="background-image: url(/user/img/banner4.png)">
            <div class="h-100 d-flex align-items-center justify-content-end">
              <div class="cta--text">
                <h6>Explore Our</h6>
                <h3 style="color: rgb(33, 17, 17); font-weight: 400;">Sports Collections</h>
                  <a href="#" class="btn  bg-primary">Explore</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> -->
  <!-- ##### CTA Area End ##### -->


  <!-- ##### Hot Picks Area Start ##### -->

  <section class="new_arrivals_area section-padding-80 clearfix">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="section-heading text-center">
            <h2>New Arrivals</h2>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <% for (let product of products) { %>
          <!-- Single Product -->
          <div class="col-12 col-sm-6 col-lg-4">
            <div class="single-product-wrapper">
              <!-- Product Image -->
              <div class="product-img">
                <div class="image-wrapper">
                  <img src="/product-images/<%= product.productImages[0] %>" alt="<%= product.productName %>" />
                  <!-- Hover Thumb -->
                  <img class="hover-img" src="/product-images/<%= product.productImages[1] %>"
                    alt="<%= product.productName %>" />
                </div>

                <!-- Product Badge -->
                <% if (product.regularPrice> product.salePrice) { %>
                  <div class="product-badge bg-white">
                    <span class="badge-new ">-<%= Math.round((product.regularPrice - product.salePrice) /
                        product.regularPrice * 100) %>%</span>
                  </div>
                  <% } %>

                    <!-- Quick View & Wishlist -->
                    <div class="wishlist-container">
                      <button id="wishlist-<%= product._id %>"
                        class="wishlist-btn fa <%= product.isInWishlist ? 'fa-heart text-danger' : 'fa-heart-o' %>"
                        onclick="toggleWishlist('<%= product._id %>')">
                      </button>
                    </div>
              </div>

              <!-- Product Description -->
              <div class="product-description">
                <a href="/product-details/<%= product._id %>" class="product-title">
                  <h6>
                    <%= product.productName %>
                  </h6>
                </a>
                <div class="product-price">
                  <% if (product.regularPrice> product.salePrice) { %>
                    <span class="old-price">₹<%= product.regularPrice %></span>
                    <% } %>
                      <span class="current-price">₹<%= product.salePrice %></span>
                </div>

                <!-- Add to Cart -->
                <div class="hover-content">
                  <div class="add-to-cart-btn">
                    <a href="/product-details/<%= product._id  %>" class="btn essence-btn">Buy Now</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <% } %>
      </div>
    </div>
  </section>
  <!-- ##### New Arrivals Area End ##### -->

  



  <!-- ##### Brands Area Start ##### -->
  <div class="brands-area d-flex align-items-center justify-content-between">

    <!-- Brand Logo -->
     <% for(let i = 0 ; i< brand.length ; i++){  %>
      <div class="single-brands-logo">
        <img src="\product-images\<%= brand[i].brandImage[0] %>" alt="" />
      </div>
      <%}  %>

  </div>
  <!-- ##### Brands Area End ##### -->


  <script>
    async function toggleWishlist(productId) {
      try {
        const wishlistIcon = document.getElementById(`wishlist-${productId}`);
        if (!wishlistIcon) {
          console.error("Wishlist button not found for product:", productId);
          return;
        }

        const isInWishlist = wishlistIcon.classList.contains("text-danger");

        const url = isInWishlist ? "/shop/remove-from-wishlist" : "/shop/add-to-wishlist";

        const response = await fetch(url, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ productId }),
        });

        const result = await response.json();

        if (result.success) {
          if (isInWishlist) {
            wishlistIcon.classList.remove("text-danger", "fa-heart");
            wishlistIcon.classList.add("fa-heart-o");
          } else {
            wishlistIcon.classList.add("text-danger", "fa-heart");
            wishlistIcon.classList.remove("fa-heart-o");
          }

          Swal.fire({ icon: "success", title: result.message });
        } else {
          Swal.fire({ icon: "error", title: "Error", text: result.message });
        }
      } catch (error) {
        console.error("Error toggling wishlist:", error);
        Swal.fire({ icon: "error", title: "Error", text: "Failed to update wishlist." });
      }
    }

  </script>




  <!--  ####   footer  ####    -->
  <%- include("../partials/footer") %>