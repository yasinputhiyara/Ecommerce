<%- include("../partials/header") %>

<style>
    .bg-image-vertical {
        position: relative;
        overflow: hidden;
        background-repeat: no-repeat;
        background-position: right center;
        background-size: auto 100%;
    }

    @media (min-width: 1025px) {
        .h-custom-2 {
            height: 100%;
        }
    }

    .error-message {
        color: red;
        font-size: 0.9rem;
        margin-top: 5px;
    }
</style>

<section class="vh-100">
    <div class="container-fluid">
        <div class="row">
            <!-- Left Section -->
            <div class="col-sm-6 text-black">
                <div class="d-flex align-items-center h-custom-2 px-5 ms-xl-4 mt-2 pt-5 pt-xl-0 mt-xl-n5">
                    <form id="forgotPasswordForm" method="post" action="/forgot-email-valid" style="width: 23rem;" onsubmit="validateForgotPasswordForm(event)">
                        <h3 class="fw-normal mb-2 pb-3" style="letter-spacing: 1px;">Forgot Password</h3>
                        
                        

                        <div class="form-outline mb-2">
                            <div id="emailError" class="error-message"></div>
                            <input type="email" name="email" id="email" class="form-control form-control-lg" />
                            <label class="form-label" for="email">Email address</label>
                        </div>

                        <div class="pt-1 mb-2">
                            <button class="btn btn-primary btn-lg btn-block w-100" type="submit">Send Reset Link</button>
                        </div>

                        <p>Remembered your password? <a href="/login" class="link-info">Log in here</a></p>

                        <a href="/auth/google" class="btn btn-lg btn-block btn-primary w-100" style="background-color: #0d002e;">
                            <i class="fab fa-google me-2"></i> Reset via Google
                        </a>
                    </form>
                </div>
            </div>

            <!-- Right Image Section -->
            <div class="col-sm-6 px-0 d-none d-sm-block">
                <img src="/banner/banner1.png" alt="Forgot Password image" class="w-100 vh-100" style="object-fit: cover; object-position: left;">
            </div>
        </div>
    </div>
</section>

<script>
    function validateForgotPasswordForm(event) {
        event.preventDefault();
        const email = document.getElementById("email");
        const emailError = document.getElementById("emailError");

        let isValid = true;

        // Email validation
        if (!email.value.trim()) {
            emailError.textContent = "Email cannot be empty.";
            isValid = false;
        } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) {
            emailError.textContent = "Please enter a valid email.";
            isValid = false;
        } else {
            emailError.textContent = "";
        }

        if (isValid) {
            const form = document.getElementById("forgotPasswordForm");
            form.submit();
        }
    }
</script>

<%- include("../partials/footer") %>
